tinymce.PluginManager.add("themifyMenu",(function(t,e){"use strict";function i(e){return{text:e.label,body:{type:e.id},onclick(){if(jQuery.isEmptyObject(e.fields)){var i={};i.selectedContent=t.selection.getContent();var o=wp.template("themify-shortcode-"+e.id);t.insertContent(o(i))}else{var n=[];jQuery.each(e.fields,(function(e,i){if("colorbox"==i.type)i.onaction=function(){var e=t.settings.color_picker_callback;if(e)return function(){var i=this;e.call(t,(t=>{i.value(t).fire("change")}),i.value())}}();else if("image"==i.type)i={type:"container",label:i.label,layout:"flex",direction:"row",items:[{type:"textbox",name:i.name},{type:"button",text:i.text,onclick(){var t=jQuery(this.$el),e=wp.media.frames.file_frame=wp.media({multiple:!1});e.on("select",(()=>{var i=e.state().get("selection").first().toJSON();t.prev().val(i.url)})),e.open()}}]};else if("iconpicker"==i.type){let t={type:"container",label:i.label,layout:"flex",direction:"row",items:[{type:"textbox",name:i.name}]},e=window.Themify_Icons;document.getElementById("tb_iframe")&&!e&&(e=document.getElementById("tb_iframe").contentWindow.Themify_Icons),e&&t.items.push({type:"button",text:i.text,onclick(){var t=jQuery(this.$el);t.hasClass("themify_fa_toggle")||t.addClass("themify_fa_toggle"),e.target=t.prev(),e.showLightbox(e.target.val())}}),i=t}n.push(i)})),t.windowManager.open({title:e.label,body:n,onSubmit(i){var o=this.toJSON();o.selectedContent=t.selection.getContent();var n=wp.template("themify-shortcode-"+e.id);t.insertContent(n(o))}})}}}}var o=[];jQuery.each(themifyEditor.shortcodes,((t,e)=>{if(e.id=t,"object"==typeof e.menu){var n=[];jQuery.each(e.menu,((t,e)=>{e.id=t,n.push(i(e))})),o.push({text:e.label,menu:n})}else o.push(i(e))})),t.addButton("btnthemifyMenu",{type:"menubutton",text:"",image:themifyEditor.editor.icon,tooltip:themifyEditor.editor.menuTooltip,menu:o})}));